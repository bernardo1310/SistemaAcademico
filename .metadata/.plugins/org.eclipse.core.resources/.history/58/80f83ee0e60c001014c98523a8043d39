CREATE DATABASE IF NOT EXISTS SistemaAcademico;
USE sistema_academico;


-- Tabela Curso
CREATE TABLE IF NOT EXISTS `Curso` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(255) NOT NULL,
  `descricao` VARCHAR(255),
  PRIMARY KEY (`codigo`)
) ENGINE = InnoDB;

-- Tabela SituacaoAluno
CREATE TABLE IF NOT EXISTS `SituacaoAluno` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`codigo`)
) ENGINE = InnoDB;

-- Tabela Turma
CREATE TABLE IF NOT EXISTS `Turma` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(255) NOT NULL,
  `curso_codigo` INT NOT NULL,  -- Chave estrangeira para o curso
  PRIMARY KEY (`codigo`),
  FOREIGN KEY (`curso_codigo`) REFERENCES `Curso`(`codigo`)
) ENGINE = InnoDB;

-- Tabela Aluno
CREATE TABLE IF NOT EXISTS `Aluno` (
  `matricula` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(255) NOT NULL,
  `status` BOOLEAN NOT NULL,
  `situacao_codigo` INT NOT NULL,  -- Chave estrangeira para a situação do aluno
  `curso_codigo` INT NOT NULL,  -- Chave estrangeira para o curso
  `turma_codigo` INT NOT NULL,  -- Chave estrangeira para a turma
  PRIMARY KEY (`matricula`),
  FOREIGN KEY (`situacao_codigo`) REFERENCES `SituacaoAluno`(`codigo`),
  FOREIGN KEY (`curso_codigo`) REFERENCES `Curso`(`codigo`),
  FOREIGN KEY (`turma_codigo`) REFERENCES `Turma`(`codigo`)
) ENGINE = InnoDB;

-- Tabela Professor
CREATE TABLE IF NOT EXISTS `Professor` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`codigo`)
) ENGINE = InnoDB;

-- Tabela Frequencia
CREATE TABLE IF NOT EXISTS `Frequencia` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `data` DATE NOT NULL,
  `presente` BOOLEAN NOT NULL,
  `aluno_matricula` INT NOT NULL,  -- Chave estrangeira para o aluno
  PRIMARY KEY (`codigo`),
  FOREIGN KEY (`aluno_matricula`) REFERENCES `Aluno`(`matricula`)
) ENGINE = InnoDB;

-- Tabela RegistroFrequencia
CREATE TABLE IF NOT EXISTS `RegistroFrequencia` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `frequencia_codigo` INT NOT NULL,  -- Chave estrangeira para a frequência
  `professor_codigo` INT NOT NULL,  -- Chave estrangeira para o professor
  `data_registro` DATE NOT NULL,
  PRIMARY KEY (`codigo`),
  FOREIGN KEY (`frequencia_codigo`) REFERENCES `Frequencia`(`codigo`),
  FOREIGN KEY (`professor_codigo`) REFERENCES `Professor`(`codigo`)
) ENGINE = InnoDB;

-- Tabela Avaliacao
CREATE TABLE IF NOT EXISTS `Avaliacao` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`codigo`)
) ENGINE = InnoDB;

-- Tabela RegistroAvaliacao
CREATE TABLE IF NOT EXISTS `RegistroAvaliacao` (
  `codigo` INT NOT NULL AUTO_INCREMENT,
  `avaliacao_codigo` INT NOT NULL,  -- Chave estrangeira para a avaliação
  `aluno_matricula` INT NOT NULL,  -- Chave estrangeira para o aluno
  `nota` DECIMAL(5,2) NOT NULL,
  PRIMARY KEY (`codigo`),
  FOREIGN KEY (`avaliacao_codigo`) REFERENCES `Avaliacao`(`codigo`),
  FOREIGN KEY (`aluno_matricula`) REFERENCES `Aluno`(`matricula`)
) ENGINE = InnoDB;
